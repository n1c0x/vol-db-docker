{% extends 'vol/base_homepage.html' %}
{% load i18n %}
{% load l10n %}
{% block title %} {% trans "Totals" %} {% endblock %}
{% block content %}

{% block active_secondary_nav %} {% endblock %}

<ul class="nav nav-tabs">
    <li class="nav-item">
        <a class="nav-link" href="{% url 'index' %}">{% trans "All flights" %}</a>
    </li>
    <li class="nav-item">
        <a class="nav-link active" href="{% url 'somme' %}">{% trans "Totals" %}</a>
    </li>
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">{% trans "Add" %}</a>
        <div class="dropdown-menu">
          <a class="dropdown-item" href="{% url 'new_vol' %}">{% trans "Flight" %}</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="{% url 'new_pilote' %}">{% trans "Pilot" %}</a>
          <a class="dropdown-item" href="{% url 'new_immatriculation' %}">{% trans "Registration" %}</a>
          <a class="dropdown-item" href="{% url 'new_code_iata' %}">{% trans "Airport" %}</a>
          <a class="dropdown-item" href="{% url 'new_type_avion' %}">{% trans "Aircraft Type" %}</a>
        </div>
    </li>
</ul>

<div class="row">
    <div class="col"><h2 class="display-4 mt-4 mb-4">{% trans "Totals" %}</h2></div>
</div>   

{% for type_avion, values in dict_somme_vols_total.items %}
    <div class="row">
        <div class="col-12">
            <table class="table table-sm">
                <thead  class="thead-dark">
                    <tr>
                        <th>{{ type_avion }}</th>
                        <th>{% trans "PIC Day" %}</th>
                        <th>{% trans "PIC Night" %}</th>
                        <th>{% trans "FO Day" %}</th>
                        <th>{% trans "FO Night" %}</th>
                        <th>{% trans "DC Day" %}</th>
                        <th>{% trans "DC Night" %}</th>
                        <th>{% trans "Inst Day" %}</th>
                        <th>{% trans "Inst Night" %}</th>
                        <th>{% trans "Simu" %}</th>
                        <th>{% trans "IFR Arrival" %}</th>
                        <th>{% trans "Duration IFR" %}</th>
                        <th>{% trans "Total" %}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th>{% trans "Current year" %}</th>
                        <td>{% if values.somme_vols_jour_cdb_cur_year.duree_jour__sum %}
                                {{ values.somme_vols_jour_cdb_cur_year.duree_jour__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_nuit_cdb_cur_year.duree_nuit__sum %}
                                {{ values.somme_vols_nuit_cdb_cur_year.duree_nuit__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_jour_opl_cur_year.duree_jour__sum %}
                                {{ values.somme_vols_jour_opl_cur_year.duree_jour__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_nuit_opl_cur_year.duree_nuit__sum %}
                                {{ values.somme_vols_nuit_opl_cur_year.duree_nuit__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_jour_dc_cur_year.duree_jour__sum %}
                                {{ values.somme_vols_jour_dc_cur_year.duree_jour__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_nuit_dc_cur_year.duree_nuit__sum %}
                                {{ values.somme_vols_nuit_dc_cur_year.duree_nuit__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_jour_inst_cur_year.duree_jour__sum %}
                                {{ values.somme_vols_jour_inst_cur_year.duree_jour__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_nuit_inst_cur_year.duree_nuit__sum %}
                                {{ values.somme_vols_nuit_inst_cur_year.duree_nuit__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_simu_cur_year.duree_simu__sum %}
                                {{ values.somme_vols_simu_cur_year.duree_simu__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_arrivee_ifr_cur_year.vol_ifr__sum|floatformat:"0" %}
                                {{ values.somme_vols_arrivee_ifr_cur_year.vol_ifr__sum|floatformat:"0" }}
                            {% else %}
                                0
                            {% endif %}</td>
                        <td>{% if values.somme_vols_ifr_cur_year.duree_ifr__sum %}
                                {{ values.somme_vols_ifr_cur_year.duree_ifr__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{{ values.liste_somme_vols_cur_year }}</td>
                    </tr>
                    <tr>
                        <th>{% trans "Last year" %}</th>
                        <td>{% if values.somme_vols_jour_cdb_last_year.duree_jour__sum %}
                                {{ values.somme_vols_jour_cdb_last_year.duree_jour__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_nuit_cdb_last_year.duree_nuit__sum %}
                                {{ values.somme_vols_nuit_cdb_last_year.duree_nuit__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_jour_opl_last_year.duree_jour__sum %}
                                {{ values.somme_vols_jour_opl_last_year.duree_jour__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_nuit_opl_last_year.duree_nuit__sum %}
                                {{ values.somme_vols_nuit_opl_last_year.duree_nuit__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_jour_dc_last_year.duree_jour__sum %}
                                {{ values.somme_vols_jour_dc_last_year.duree_jour__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_nuit_dc_last_year.duree_nuit__sum %}
                                {{ values.somme_vols_nuit_dc_last_year.duree_nuit__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_jour_inst_last_year.duree_jour__sum %}
                                {{ values.somme_vols_jour_inst_last_year.duree_jour__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_nuit_inst_last_year.duree_nuit__sum %}
                                {{ values.somme_vols_nuit_inst_last_year.duree_nuit__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_simu_last_year.duree_simu__sum %}
                                {{ values.somme_vols_simu_last_year.duree_simu__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_arrivee_ifr_last_year.vol_ifr__sum|floatformat:"0" %}
                                {{ values.somme_vols_arrivee_ifr_last_year.vol_ifr__sum|floatformat:"0" }}
                            {% else %}
                                0
                            {% endif %}</td>
                        <td>{% if values.somme_vols_ifr_last_year.duree_ifr__sum %}
                                {{ values.somme_vols_ifr_last_year.duree_ifr__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{{ values.liste_somme_vols_last_year }}</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr class="table-primary">
                        <th>{% trans "Total" %}</th>
                        <td>{% if values.somme_vols_jour_cdb_total.duree_jour__sum %}
                                {{ values.somme_vols_jour_cdb_total.duree_jour__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_nuit_cdb_total.duree_nuit__sum %}
                                {{ values.somme_vols_nuit_cdb_total.duree_nuit__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_jour_opl_total.duree_jour__sum %}
                                {{ values.somme_vols_jour_opl_total.duree_jour__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_nuit_opl_total.duree_nuit__sum %}
                                {{ values.somme_vols_nuit_opl_total.duree_nuit__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_jour_dc_total.duree_jour__sum %}
                                {{ values.somme_vols_jour_dc_total.duree_jour__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_nuit_dc_total.duree_nuit__sum %}
                                {{ values.somme_vols_nuit_dc_total.duree_nuit__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_jour_inst_total.duree_jour__sum %}
                                {{ values.somme_vols_jour_inst_total.duree_jour__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_nuit_inst_total.duree_nuit__sum %}
                                {{ values.somme_vols_nuit_inst_total.duree_nuit__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_simu_total.duree_simu__sum %}
                                {{ values.somme_vols_simu_total.duree_simu__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{% if values.somme_vols_arrivee_ifr_total.vol_ifr__sum|floatformat:"0" %}
                                {{ values.somme_vols_arrivee_ifr_total.vol_ifr__sum|floatformat:"0" }}
                            {% else %}
                                0
                            {% endif %}</td>
                        <td>{% if values.somme_vols_ifr_total.duree_ifr__sum %}
                                {{ values.somme_vols_ifr_total.duree_ifr__sum }}
                            {% else %}
                                --:--:--
                            {% endif %}</td>
                        <td>{{ values.liste_somme_vols_total_total }}</td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
{% endfor %}
{% endblock %}